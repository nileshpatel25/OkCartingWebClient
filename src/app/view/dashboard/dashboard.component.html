 <!-- Content Wrapper. Contains page content -->
 <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0 text-dark">Dashboard</h1>
          </div><!-- /.col -->
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">Dashboard</li>
            </ol>
          </div><!-- /.col -->
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header --> <!-- Main content -->
    <section class="content">
        <div class="container-fluid">
          <!-- Info boxes -->
          <div class="row">
            <div class="col-12 col-sm-6 col-md-3">
              <div class="info-box">
                <span class="info-box-icon bg-info elevation-1"><i class="fa fa-truck"></i></span>
  
                <div class="info-box-content">
                  <span class="info-box-text">Total Vehicle</span>
                  <span class="info-box-number">
                   
                    {{vehiclecount}}
                  </span>
                </div>
                <!-- /.info-box-content -->
              </div>
              <!-- /.info-box -->
            </div>
            <!-- /.col -->
            <div class="col-12 col-sm-6 col-md-3">
              <div class="info-box mb-3">
                <span class="info-box-icon bg-danger elevation-1"><i class="fa fa-signal"></i></span>
  
                <div class="info-box-content">
                  <span class="info-box-text">Pending Amount</span>
                  <span class="info-box-number">{{pendingamount}}</span>
                </div>
                <!-- /.info-box-content -->
              </div>
              <!-- /.info-box -->
            </div>
            <!-- /.col -->
  
            <!-- fix for small devices only -->
            <div class="clearfix hidden-md-up"></div>
  
            <div class="col-12 col-sm-6 col-md-3">
              <div class="info-box mb-3">
                <span class="info-box-icon bg-success elevation-1"><i class="fa fa-signal"></i></span>
  
                <div class="info-box-content">
                  <span class="info-box-text">Received Amount</span>
                  <span class="info-box-number">{{receivedamount}}</span>
                </div>
                <!-- /.info-box-content -->
              </div>
              <!-- /.info-box -->
            </div>
            <!-- /.col -->
            <div class="col-12 col-sm-6 col-md-3">
              <div class="info-box mb-3">
                <span class="info-box-icon bg-warning elevation-1"><i class="fas fa-users"></i></span>
  
                <div class="info-box-content">
                  <span class="info-box-text">Total Customer</span>
                  <span class="info-box-number">{{customercount}}</span>
                </div>
                <!-- /.info-box-content -->
              </div>
              <!-- /.info-box -->
            </div>
            <!-- /.col -->
          </div>
          <!-- /.row -->
        </div>
    </section>
    <section class="content">
      <div class="container-fluid">
       
        <div class="row">
          <div class="col-md-12">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title">
                   <b>Customer Pending Amount Details</b> 
                  </h3>
                  <div class="card-tools">
                      <!-- <a class="btn btn-info" href="/#/jobwork">
                          <i class="fas fa-plus"> Add New jobwork</i>
                      </a> -->
                    </div>
                </div>
                <!-- /.card-header -->
                <div class="card-body table-responsive p-0">
                  <!-- <div class="table-responsive p-0"> -->
                  <table class="table table-hover text-nowrap">
                      <thead>                  
                        <tr>
                          <th style="width: 10px">#</th>
                          <!-- <th>Invoice No</th> -->
                          <th>CustName</th>  
                                       
                        <th>Date</th>
                       
                       
                        <th>TotalAmt</th>
                        <th>ReceivedAmt</th>
                        <th>PendingAmt</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let c of customerpendingamount;let i=index;">
                          <td>
                           {{i+1}}
                          </td>
                          <td>
                            {{c.customername}}
                          </td>
                          <td>
                            <ng-container *ngFor="let item of c.jobworkdetails">
                              {{item.workdate}},
                              
                            </ng-container>
                          </td>
                          <td>
                            {{c.totalamt}}
                          </td>
                         <td>
                           {{c.receivedamt}}
                         </td>
                         <td>
                           {{c.totalamt - c.receivedamt}}
                         </td>
                        </tr>
                       
                      </tbody>
                    </table>
                    <!-- </div> -->
                </div>
                <!-- /.card-body -->
                <div class="card-footer clearfix">
                  <ul class="pagination pagination-sm m-0 float-right">
                    <li class="page-item" [ngClass]="{'disabled': pageNumber === 1}"><a class="page-link" style="cursor: pointer;" (click)="prev()">&laquo;</a></li>
                  
                    <li class="page-item" [ngClass]="{'disabled': pageNumber === lastPage}"><a class="page-link" style="cursor: pointer;" (click)="next()">&raquo;</a></li>
                
                  </ul>
                </div>
              </div>
              <!-- /.card -->
  
      
      </div>
        </div></div></section>
    <section class="content">
      <div class="container-fluid">
       
        <div class="row">
          <div class="col-md-12">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title"></h3>
                  <div class="card-tools">
                      <a class="btn btn-info" href="/#/jobwork">
                          <i class="fas fa-plus"> Add New jobwork</i>
                      </a>
                    </div>
                </div>
                <!-- /.card-header -->
                <div class="card-body table-responsive p-0">
                  <!-- <div class="table-responsive p-0"> -->
                  <table class="table table-hover text-nowrap">
                      <thead>                  
                        <tr>
                          <th style="width: 10px">#</th>
                          <!-- <th>Invoice No</th> -->
                          <th>CustName</th>  
                          <!-- <th>VehiName</th>                    -->
                          <th>Date</th>
                          <th>Payment</th>
                          <th>Status</th>
                          <!-- <th>Hour/Round</th>
                          <th>PerHourRate</th>
                          <th>TotalAmount</th> -->
                          <th>View Details</th>
                          <th style="width: 10%"> Action</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let c of jobworklist;let i=index;">
                          <td>{{i+1}}</td>
                          <!-- <td style="color: blue;">
                            <a style="cursor: pointer;" [routerLink]="['/invoice']" [queryParams]="{id: c.id}">{{c.invoiceno}}</a>
               </td> -->
                          <td>{{c.customername}}</td>
                          <!-- <td>
                            <ng-container *ngFor="let item of c.jobworkdetails">
                              {{item.Vehiclename}},
                              
                            </ng-container>
                           
                          </td> -->
                          <td>
                            <ng-container *ngFor="let item of c.jobworkdetails">
                              {{item.workdate}},
                              
                            </ng-container>
                            <!-- {{c.paymenttype}} -->
                           <!-- {{c.jobworkdetails[0].workdate | date}} -->
                          </td>
                          <td>{{c.paymenttype}}</td>
                          <td>
                            <a style="cursor: pointer;" [ngClass]="{class1: c.status=='Completed'}" class="badge badge-warning" (click)="onChange(c.id)">{{c.status}}</a>
                            <!-- <ui-switch [checked]="c.status" (change)="onChange($event,c.id)"></ui-switch> -->
                          </td>
                          <!-- <td>
                            <ng-container *ngFor="let item of c.jobworkdetails">
                              {{item.hour}},
                              
                            </ng-container>
                              
                          </td>
                          <td>
                            <ng-container *ngFor="let item of c.jobworkdetails">
                              {{item.perhourrate}},
                              
                            </ng-container>
                           </td>
                          <td>
                            <ng-container *ngFor="let item of c.jobworkdetails">
                              {{item.totalamount}},
                              
                            </ng-container>
                            
                          </td> -->
                          <td>
                            <a style="cursor: pointer;" class="badge badge-info" (click)="openModalWithClass(template,c.id)">View Details</a>
                            <!-- <button class="btn btn-primary m-3" (click)="openModalWithClass(template,c.id)"> <i class="fa fa-plus-circle"
                              ></i>
                          
                      </button> -->
                          </td>
                          <td style="width: 70px;">
                           
      
                            <button [routerLink]="['/jobwork']" [queryParams]="{id: c.id}" class="btn btn-default btn-sm" style="cursor: pointer;"><i class="far fa-edit text-primary"></i></button>
                            <button class="btn btn-default btn-sm" (click)="delete(c.id)" style="margin-left: 5px;"><i class="fa fa-trash text-danger"></i></button>  
                                     
                          </td>
                        </tr>
                       
                      </tbody>
                    </table>
                    <!-- </div> -->
                </div>
                <!-- /.card-body -->
                <div class="card-footer clearfix">
                  <ul class="pagination pagination-sm m-0 float-right">
                    <li class="page-item" [ngClass]="{'disabled': pageNumber === 1}"><a class="page-link" style="cursor: pointer;" (click)="prev()">&laquo;</a></li>
                  
                    <li class="page-item" [ngClass]="{'disabled': pageNumber === lastPage}"><a class="page-link" style="cursor: pointer;" (click)="next()">&raquo;</a></li>
                
                  </ul>
                </div>
              </div>
              <!-- /.card -->
  
      
      </div>
        </div></div></section>
      
       



 </div>
 
 <ng-template #template>  
  <div class="modal-header">  
    <h4 class="modal-title pull-left">{{customername}} Work details</h4>  
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">  
      <span aria-hidden="true">×</span>  
    </button>  
  </div>  
  <div class="modal-body">  
    <div class="card-body">
      <div class="card-body table-responsive p-0">
        <!-- <div class="table-responsive p-0"> -->
        <table class="table table-hover text-nowrap">
      <thead>                  
        <tr>
          <th style="width: 10px">#</th>
        
          <th>Vehicle Name</th>    
          <th>Discription</th>               
          <th>Date</th>
         
          <th>Hour/Round</th>
          <th>PerHourRate</th>
          <th>TotalAmount</th>
         
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of jobworklistbycust;let i=index;">
          <td>{{i+1}}</td>
         
          <td>
           
              {{item.Vehiclename}}
              
         
           
          </td>
          <td>
            {{item.discrition}}
          </td>
          <td>
          
              {{item.workdate}}
              
           
            <!-- {{c.paymenttype}} -->
           <!-- {{c.jobworkdetails[0].workdate | date}} -->
          </td>
         
          <td>
          
              {{item.hour}}
              
          
              
          </td>
          <td>
          
              {{item.perhourrate}}
              
          
           </td>
          <td>
           
              {{item.totalamount}}
              
            
            
          </td>
         
        </tr>
        <tr>
      
          <td colspan="6" style="text-align: right; padding-right: 110px;">
            Total Amount : {{totalamt}}
          </td>
        </tr>
      
      </tbody>
   
    </table> 
    </div>
    </div>

  </div>
  <div class="modal-footer">  
    <button type="button" class="btn btn-default" (click)="modalRef.hide()">Close</button>  
  </div>  
 
</ng-template>  
